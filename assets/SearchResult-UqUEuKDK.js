import{g as P,u as U,h as N,i as z,j as oo,t as eo,k as no,l as _,m as J,n as o,p as to,q as ho,s as so,R as D,v as lo,x as io,y as co,z as ro,A as ao,B as F,C as K,D as mo,E as uo,F as po,G as Co,L as wo,H as vo,I as go,J as yo,K as x,M as bo,N as O}from"./app-C1Jzzvmv.js";const To=["/","/about/contribute.html","/about/history.html","/about/","/about/thinks.html","/composition/","/culture/join_us.html","/culture/link.html","/culture/org.html","/culture/pink.html","/posted/sns.html","/posted/time.html","/video/","/composition/accord/","/composition/cover/","/composition/ep/","/composition/idea/","/composition/ost/","/composition/others/","/composition/piano/","/composition/piano/improvisation.html","/composition/single/","/composition/single/christmas-star.html","/others/endorsement/","/others/interview/","/others/trophy/","/show/Concert/","/show/business/","/show/live/","/show/public/","/video/movie/","/video/tv/","/composition/cd/00/01_adorable-lady.html","/composition/cd/00/02_perfectionism.html","/composition/cd/00/03_starry-mood.html","/composition/cd/00/04_wife.html","/composition/cd/00/05_basketball-match.html","/composition/cd/00/06_black-humor.html","/composition/cd/00/07_lstanbul.html","/composition/cd/00/08_ancient-indian-turtledove.html","/composition/cd/00/09_tornado.html","/composition/cd/00/10_counter-clockwise-clock.html","/composition/cd/00/","/composition/cd/00/public.html","/composition/cd/01/01_love-before-bc.html","/composition/cd/01/02_dad_i'm-home.html","/composition/cd/01/03_simple-love.html","/composition/cd/01/04_ninja.html","/composition/cd/01/05_i-find-it-hard-to-say.html","/composition/cd/01/06_shanghai-1943.html","/composition/cd/01/07_sorry.html","/composition/cd/01/08_william-castle.html","/composition/cd/01/09_nunchucks.html","/composition/cd/01/10_silence.html","/composition/cd/01/","/composition/cd/01/public.html","/composition/cd/02/01_half-beast-human.html","/composition/cd/02/02_peninsula-ironbox.html","/composition/cd/02/03_secret-sign.html","/composition/cd/02/04_dragon-fist.html","/composition/cd/02/05_the-trains-destination.html","/composition/cd/02/06_split.html","/composition/cd/02/07_grandpas-tea.html","/composition/cd/02/08_back-to-the-past.html","/composition/cd/02/09_little-blacksmith-in-milan.html","/composition/cd/02/10_the-final-battle.html","/composition/cd/02/","/composition/cd/02/public.html","/composition/cd/03/","/composition/cd/03/public.html","/composition/cd/04/","/composition/cd/04/public.html","/composition/cd/05/","/composition/cd/05/public.html","/composition/cd/06/","/composition/cd/06/public.html","/composition/cd/07/","/composition/cd/07/public.html","/composition/cd/08/","/composition/cd/08/public.html","/composition/cd/10/","/composition/cd/10/public.html","/composition/cd/11/","/composition/cd/11/public.html","/composition/cd/12/","/composition/cd/12/public.html","/composition/cd/14/","/composition/cd/14/public.html","/composition/cd/16/","/composition/cd/16/public.html","/composition/cd/22/","/composition/cd/22/public.html","/composition/live/2002theone/","/composition/live/2002theone/public.html","/composition/live/2004incomparable/","/composition/live/2004incomparable/public.html","/composition/live/2007WorldTours/","/composition/live/2007WorldTours/public.html","/composition/live/2010TheEra/","/composition/live/2010TheEra/public.html","/composition/live/2013OpusJay/","/composition/live/2013OpusJay/public.html","/composition/live/2016Invincible/","/composition/live/2016Invincible/public.html","/show/Concert/2001Fantasy/HongKong.html","/show/Concert/2001Fantasy/Lumpur.html","/show/Concert/2001Fantasy/","/show/Concert/2001Fantasy/Singapore.html","/show/Concert/2001Fantasy/TaoYuan.html","/show/Concert/2002TheOne/2002HongKong.html","/show/Concert/2002TheOne/2002LasVegas.html","/show/Concert/2002TheOne/2002Taipei.html","/show/Concert/2002TheOne/2003Bangkok.html","/show/Concert/2002TheOne/2003BeiJing.html","/show/Concert/2002TheOne/2003GuangZhou.html","/show/Concert/2002TheOne/2003KualaLumpur.html","/show/Concert/2002TheOne/2003ShangHai.html","/show/Concert/2002TheOne/2003Singapore.html","/show/Concert/2002TheOne/2003Vancouver.html","/show/Concert/2002TheOne/2004HangZhou.html","/show/Concert/2002TheOne/2004ShenZhen.html","/show/Concert/2002TheOne/2004WuHan.html","/show/Concert/2002TheOne/","/show/Concert/2004incomparable/2004Connecticut.html","/show/Concert/2004incomparable/2004HongKong.html","/show/Concert/2004incomparable/2004LosAngeles.html","/show/Concert/2004incomparable/2004Singapore.html","/show/Concert/2004incomparable/2004Taipei.html","/show/Concert/2004incomparable/2005BeiJing.html","/show/Concert/2004incomparable/2005GuangZhou.html","/show/Concert/2004incomparable/2005HarBin.html","/show/Concert/2004incomparable/2005KualaLumpur.html","/show/Concert/2004incomparable/2005ShangHai.html","/show/Concert/2004incomparable/2005ShenZhen.html","/show/Concert/2004incomparable/2005SuZhou.html","/show/Concert/2004incomparable/2006Tokyo.html","/show/Concert/2004incomparable/","/show/Concert/2007WorldTours/2007HongKong.html","/show/Concert/2007WorldTours/2007LosAngeles.html","/show/Concert/2007WorldTours/2007ShangHai.html","/show/Concert/2007WorldTours/2007XinBei.html","/show/Concert/2007WorldTours/2008BeiJing.html","/show/Concert/2007WorldTours/2008ChangSha.html","/show/Concert/2007WorldTours/2008ChengDu.html","/show/Concert/2007WorldTours/2008ChongQing.html","/show/Concert/2007WorldTours/2008Connecticut.html","/show/Concert/2007WorldTours/2008GuangZhou.html","/show/Concert/2007WorldTours/2008GuiYang.html","/show/Concert/2007WorldTours/2008HangZhou.html","/show/Concert/2007WorldTours/2008KunMing.html","/show/Concert/2007WorldTours/2008Macau.html","/show/Concert/2007WorldTours/2008Malaysia.html","/show/Concert/2007WorldTours/2008NanJing.html","/show/Concert/2007WorldTours/2008NanNing.html","/show/Concert/2007WorldTours/2008Singapore.html","/show/Concert/2007WorldTours/2008TianJin.html","/show/Concert/2007WorldTours/2008Tokyo.html","/show/Concert/2007WorldTours/2008Toronto.html","/show/Concert/2007WorldTours/2008WenZhou.html","/show/Concert/2007WorldTours/2008WuHan.html","/show/Concert/2007WorldTours/2008XiAn.html","/show/Concert/2007WorldTours/2008Xiamen.html","/show/Concert/2007WorldTours/2008YangZhou.html","/show/Concert/2007WorldTours/2009ChangSha.html","/show/Concert/2007WorldTours/2009ChengDu.html","/show/Concert/2007WorldTours/2009FoShan.html","/show/Concert/2007WorldTours/2009KunShan.html","/show/Concert/2007WorldTours/2009LuoYang.html","/show/Concert/2007WorldTours/2009QuanZhou.html","/show/Concert/2007WorldTours/2009ShenYang.html","/show/Concert/2007WorldTours/2009ShenZhen.html","/show/Concert/2007WorldTours/2009Sydney.html","/show/Concert/2007WorldTours/","/show/Concert/2010TheEra/2010BeiJing.html","/show/Concert/2010TheEra/2010ChangZhou.html","/show/Concert/2010TheEra/2010ChengDu.html","/show/Concert/2010TheEra/2010ChongQing.html","/show/Concert/2010TheEra/2010FuZhou.html","/show/Concert/2010TheEra/2010HangZhou.html","/show/Concert/2010TheEra/2010HeFei.html","/show/Concert/2010TheEra/2010HongKong.html","/show/Concert/2010TheEra/2010NanJing.html","/show/Concert/2010TheEra/2010NingBo.html","/show/Concert/2010TheEra/2010QingDao.html","/show/Concert/2010TheEra/2010SanJose.html","/show/Concert/2010TheEra/2010ShangHai.html","/show/Concert/2010TheEra/2010Singapore.html","/show/Concert/2010TheEra/2010TaiBei.html","/show/Concert/2010TheEra/2010TianJin.html","/show/Concert/2010TheEra/2010Vancouver.html","/show/Concert/2010TheEra/2010WuHan.html","/show/Concert/2010TheEra/2010XiAn.html","/show/Concert/2010TheEra/2010ZhengZhou.html","/show/Concert/2010TheEra/2011ChangSha.html","/show/Concert/2010TheEra/2011DaLian.html","/show/Concert/2010TheEra/2011GuangZhou.html","/show/Concert/2010TheEra/2011JiNan.html","/show/Concert/2010TheEra/2011JiangYin.html","/show/Concert/2010TheEra/2011KaoHsiung.html","/show/Concert/2010TheEra/2011KualaLumpur.html","/show/Concert/2010TheEra/2011LosAngeles.html","/show/Concert/2010TheEra/2011LuoYang.html","/show/Concert/2010TheEra/2011NanTong.html","/show/Concert/2010TheEra/2011ShenYang.html","/show/Concert/2010TheEra/2011ShenZhen.html","/show/Concert/2010TheEra/2011SuZhou.html","/show/Concert/2010TheEra/","/show/Concert/2013OpusJay/2013BeiJing.html","/show/Concert/2013OpusJay/2013ChengDu.html","/show/Concert/2013OpusJay/2013ChongQing.html","/show/Concert/2013OpusJay/2013FuZhou.html","/show/Concert/2013OpusJay/2013GuangZhou.html","/show/Concert/2013OpusJay/2013HangZhou.html","/show/Concert/2013OpusJay/2013HongKong.html","/show/Concert/2013OpusJay/2013Jakarta.html","/show/Concert/2013OpusJay/2013KualaLumpur.html","/show/Concert/2013OpusJay/2013NanJing.html","/show/Concert/2013OpusJay/2013NanNing.html","/show/Concert/2013OpusJay/2013ShangHai.html","/show/Concert/2013OpusJay/2013ShenZhen.html","/show/Concert/2013OpusJay/2013Singapore.html","/show/Concert/2013OpusJay/2013Taipei.html","/show/Concert/2013OpusJay/2013TianJin.html","/show/Concert/2013OpusJay/2013WuHan.html","/show/Concert/2013OpusJay/2013XiAn.html","/show/Concert/2013OpusJay/2014BeiJing.html","/show/Concert/2013OpusJay/2014ChangSha.html","/show/Concert/2013OpusJay/2014ChangZhou.html","/show/Concert/2013OpusJay/2014DaLian.html","/show/Concert/2013OpusJay/2014GuangZhou.html","/show/Concert/2013OpusJay/2014GuiYang.html","/show/Concert/2013OpusJay/2014HeFei.html","/show/Concert/2013OpusJay/2014HongKong.html","/show/Concert/2013OpusJay/2014KualaLumpur.html","/show/Concert/2013OpusJay/2014QingDao.html","/show/Concert/2013OpusJay/2014ShangHai.html","/show/Concert/2013OpusJay/2014Singapore.html","/show/Concert/2013OpusJay/2014Sydney.html","/show/Concert/2013OpusJay/2014TaiYuan.html","/show/Concert/2013OpusJay/2014ZhengZhou.html","/show/Concert/2013OpusJay/2015ChengDu.html","/show/Concert/2013OpusJay/2015ChongQing.html","/show/Concert/2013OpusJay/2015FoShan.html","/show/Concert/2013OpusJay/2015HangZhou.html","/show/Concert/2013OpusJay/2015JiNan.html","/show/Concert/2013OpusJay/2015KunMing.html","/show/Concert/2013OpusJay/2015LiShui.html","/show/Concert/2013OpusJay/2015LuoYang.html","/show/Concert/2013OpusJay/2015NanChang.html","/show/Concert/2013OpusJay/2015NanJing.html","/show/Concert/2013OpusJay/2015ShenYang.html","/show/Concert/2013OpusJay/2015ShenZhen.html","/show/Concert/2013OpusJay/2015SuZhou.html","/show/Concert/2013OpusJay/2015TianJin.html","/show/Concert/2013OpusJay/2015WuHan.html","/show/Concert/2013OpusJay/2015XiAn.html","/show/Concert/2013OpusJay/2015XiaMen.html","/show/Concert/2013OpusJay/2015XuZhou.html","/show/Concert/2013OpusJay/","/show/Concert/2016Invincible/2016BeiJing.html","/show/Concert/2016Invincible/2016ChangSha.html","/show/Concert/2016Invincible/2016ChangZhou.html","/show/Concert/2016Invincible/2016DaLian.html","/show/Concert/2016Invincible/2016FuZhou.html","/show/Concert/2016Invincible/2016GuangZhou.html","/show/Concert/2016Invincible/2016HeFei.html","/show/Concert/2016Invincible/2016HuZhou.html","/show/Concert/2016Invincible/2016JiaXing.html","/show/Concert/2016Invincible/2016KualaLumpur.html","/show/Concert/2016Invincible/2016NanTong.html","/show/Concert/2016Invincible/2016QingDao.html","/show/Concert/2016Invincible/2016ShangHai.html","/show/Concert/2016Invincible/2016Singapore.html","/show/Concert/2016Invincible/2016TaiYuan.html","/show/Concert/2016Invincible/2016ZhengZhou.html","/show/Concert/2016Invincible/2017BeiJing.html","/show/Concert/2016Invincible/2017ChongQing.html","/show/Concert/2016Invincible/2017FoShan.html","/show/Concert/2016Invincible/2017HangZhou.html","/show/Concert/2016Invincible/2017HongKong.html","/show/Concert/2016Invincible/2017JiNan.html","/show/Concert/2016Invincible/2017London.html","/show/Concert/2016Invincible/2017NanChang.html","/show/Concert/2016Invincible/2017NanJing.html","/show/Concert/2016Invincible/2017ShenYang.html","/show/Concert/2016Invincible/2017ShenZhen.html","/show/Concert/2016Invincible/2017SuZhou.html","/show/Concert/2016Invincible/2017TaiZhou.html","/show/Concert/2016Invincible/2017Taipei.html","/show/Concert/2016Invincible/2017TianJin.html","/show/Concert/2016Invincible/2017XiAn.html","/show/Concert/2016Invincible/2017Xiamen.html","/show/Concert/2016Invincible/2018ChangSha.html","/show/Concert/2016Invincible/2018ChangZhou.html","/show/Concert/2016Invincible/2018ChengDu.html","/show/Concert/2016Invincible/2018DaLian.html","/show/Concert/2016Invincible/2018FuZhou.html","/show/Concert/2016Invincible/2018GuiYang.html","/show/Concert/2016Invincible/2018HongKong.html","/show/Concert/2016Invincible/2018JinHua.html","/show/Concert/2016Invincible/2018KualaLumpur.html","/show/Concert/2016Invincible/2018LuoYang.html","/show/Concert/2016Invincible/2018Macao.html","/show/Concert/2016Invincible/2018QingDao.html","/show/Concert/2016Invincible/2018Quanzhou.html","/show/Concert/2016Invincible/2018ShangHai.html","/show/Concert/2016Invincible/2018ShaoXing.html","/show/Concert/2016Invincible/2018Singapore.html","/show/Concert/2016Invincible/2018Sydney.html","/show/Concert/2016Invincible/2018TaiYuan.html","/show/Concert/2016Invincible/2018XuZhou.html","/show/Concert/2016Invincible/2018ZhengZhou.html","/show/Concert/2016Invincible/2018ZhuHai.html","/show/Concert/2016Invincible/2019LasVegas.html","/show/Concert/2016Invincible/2019London.html","/show/Concert/2016Invincible/2019Paris.html","/show/Concert/2016Invincible/","/show/Concert/2019carnival/2019ChangSha.html","/show/Concert/2019carnival/2024ChangSha.html","/show/Concert/2019carnival/2024Malaysia.html","/show/Concert/2019carnival/2024Melbourne.html","/show/Concert/2019carnival/2024Singapore.html","/show/Concert/2019carnival/2024Sydney.html","/show/Concert/2019carnival/2024Yokohama.html","/show/Concert/2019carnival/2024nanjing.html","/show/Concert/2019carnival/2024shenzhen.html","/show/Concert/2019carnival/2025Dubai.html","/show/Concert/2019carnival/2025HongKong.html","/show/Concert/2019carnival/2025JiNan.html","/show/Concert/2019carnival/2025NanNing.html","/show/Concert/2019carnival/2025SanYa.html","/show/Concert/2019carnival/2025WuHan.html","/show/Concert/2019carnival/2025XiaMen.html","/show/Concert/2019carnival/2025shanghai.html","/show/Concert/2019carnival/","/404.html","/culture/","/posted/","/others/","/show/","/composition/cd/","/composition/live/"],Jo="SLIMSEARCH_QUERY_HISTORY",v=x(Jo,[]),Oo=()=>{const{queryHistoryCount:h}=O;return{enabled:h>0,queryHistories:v,addQueryHistory:c=>{v.value=Array.from(new Set([c,...v.value.slice(0,h-1)]))},removeQueryHistory:c=>{v.value=[...v.value.slice(0,c),...v.value.slice(c+1)]}}},L=h=>To[h.id]+("anchor"in h?`#${h.anchor}`:""),So="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:Y}=O,g=x(So,[]),Io=()=>({enabled:Y>0,resultHistories:g,addResultHistory:i=>{{const c={link:L(i),display:i.display};"header"in i&&(c.header=i.header),g.value=[c,...g.value.slice(0,Y-1)]}},removeResultHistory:i=>{g.value=[...g.value.slice(0,i),...g.value.slice(i+1)]}}),Ho=h=>{const i=mo(),c=N(),S=uo(),s=_(0),y=J(()=>s.value>0),m=po([]);return Co(()=>{const{search:I,terminate:C}=wo(),b=go(w=>{const{resultsFilter:H=t=>t,querySplitter:d,suggestionsFilter:f,...l}=i.value;w?(s.value+=1,I(w,c.value,l).then(t=>H(t,w,c.value,S.value)).then(t=>{s.value-=1,m.value=t}).catch(t=>{console.warn(t),s.value-=1,s.value||(m.value=[])})):m.value=[]},O.searchDelay-O.suggestDelay,{maxWait:5e3});vo([h,c],([w])=>b(w.join(" "))),yo(()=>{C()})}),{isSearching:y,results:m}};var Wo=P({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(h,{emit:i}){const c=U(),S=N(),s=z(oo),{addQueryHistory:y,queryHistories:m,removeQueryHistory:I}=Oo(),{resultHistories:C,addResultHistory:b,removeResultHistory:w}=Io(),H=eo(h,"queries"),{results:d,isSearching:f}=Ho(H),l=no({isQuery:!0,index:0}),t=_(0),u=_(0),k=J(()=>m.value.length>0||C.value.length>0),Z=J(()=>d.value.length>0),W=J(()=>d.value[t.value]||null),R=()=>{const{isQuery:e,index:n}=l;n===0?(l.isQuery=!e,l.index=e?C.value.length-1:m.value.length-1):l.index=n-1},A=()=>{const{isQuery:e,index:n}=l;n===(e?m.value.length-1:C.value.length-1)?(l.isQuery=!e,l.index=0):l.index=n+1},q=()=>{t.value=t.value>0?t.value-1:d.value.length-1,u.value=W.value.contents.length-1},B=()=>{t.value=t.value<d.value.length-1?t.value+1:0,u.value=0},M=()=>{u.value<W.value.contents.length-1?u.value+=1:B()},X=()=>{u.value>0?u.value-=1:q()},E=e=>e.map(n=>bo(n)?n:o(n[0],n[1])),G=e=>{if(e.type==="customField"){const n=ro[e.index]||"$content",[p,r=""]=ao(n)?n[S.value].split("$content"):n.split("$content");return e.display.map(a=>o("div",E([p,...a,r])))}return e.display.map(n=>o("div",E(n)))},T=()=>{t.value=0,u.value=0,i("updateQuery",""),i("close")},$=()=>o("div",{class:"slimsearch-records"},o("div",{class:"slimsearch-record"},[o("div",{class:"slimsearch-record-title"},s.value.queryHistory),o("ul",{class:"slimsearch-record-contents",role:"listbox"},m.value.map((e,n)=>{const p=l.isQuery&&l.index===n;return o("li",{class:["slimsearch-record-matches",{active:p}],role:"option","aria-selected":p,onClick:()=>{i("updateQuery",e)}},o("div",[o(F,{class:"slimsearch-record-type"}),o("div",{class:"slimsearch-record-content"},e),o("button",{type:"button",class:"slimsearch-remove-icon",title:s.value.remove,"aria-label":s.value.remove,innerHTML:K,onClick:r=>{r.preventDefault(),r.stopPropagation(),I(n)}})]))}))])),j=()=>o("ul",{class:"slimsearch-records"},o("li",{class:"slimsearch-record"},[o("div",{class:"slimsearch-record-title"},s.value.resultHistory),o("ul",{class:"slimsearch-record-contents",role:"listbox"},C.value.map((e,n)=>{const p=!l.isQuery&&l.index===n;return o("li",{class:["slimsearch-record-matches",{active:p}],role:"option","aria-selected":p},o(D,{to:e.link,onClick:()=>{T()}},()=>[o(F,{class:"slimsearch-record-type"}),o("div",{class:"slimsearch-record-content"},[e.header?o("div",{class:"slimsearch-record-content-header"},e.header):null,o("div",e.display.map(r=>E(r)).flat())]),o("button",{type:"button",class:"slimsearch-remove-icon",title:s.value.remove,"aria-label":s.value.remove,innerHTML:K,onClick:r=>{r.preventDefault(),r.stopPropagation(),w(n)}})]))}))]));return to("keydown",e=>{if(h.isFocusing){if(Z.value){if(e.key==="ArrowUp")X();else if(e.key==="ArrowDown")M();else if(e.key==="Enter"){const n=W.value.contents[u.value];y(h.queries.join(" ")),b(n),c.push(L(n)),T()}}else if(e.key==="ArrowUp")R();else if(e.key==="ArrowDown")A();else if(e.key==="Enter"){const{index:n}=l;l.isQuery?(e.preventDefault(),i("updateQuery",m.value[n])):(c.push(C.value[n].link),T())}}}),ho([t,u],()=>{var e;(e=document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>o("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:h.queries.length?!Z.value:!k.value}]},h.queries.length?f.value?o(so,{hint:s.value.searching}):Z.value?o("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},d.value.map(({title:e,contents:n},p)=>{const r=t.value===p;return o("div",{class:["slimsearch-record",{active:r}],role:"group","aria-selected":r},[o("div",{class:"slimsearch-record-title"},e||s.value.defaultTitle),o("ul",{class:"slimsearch-record-contents"},n.map((a,V)=>{const Q=r&&u.value===V;return o("li",{class:["slimsearch-record-matches",{active:Q}],role:"option","aria-selected":Q},o(D,{to:L(a),onClick:()=>{y(h.queries.join(" ")),b(a),T()}},()=>[a.type==="text"?null:o(a.type==="title"?lo:a.type==="heading"?io:co,{class:"slimsearch-record-type"}),o("div",{class:"slimsearch-record-content"},[a.type==="text"&&a.header?o("div",{class:"slimsearch-record-content-header"},a.header):null,o("div",G(a))])]))}))])})):s.value.emptyResult:k.value?[$(),j()]:s.value.emptyHistory)}});export{Wo as default};
